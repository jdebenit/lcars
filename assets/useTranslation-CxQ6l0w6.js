var k=Object.defineProperty;var H=(t,e,n)=>e in t?k(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var L=(t,e,n)=>H(t,typeof e!="symbol"?e+"":e,n);import{r as g}from"./index-DRjF_FHU.js";function $(){if(console&&console.warn){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];m(e[0])&&(e[0]=`react-i18next:: ${e[0]}`),console.warn(...e)}}const E={};function C(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];m(e[0])&&E[e[0]]||(m(e[0])&&(E[e[0]]=new Date),$(...e))}const z=(t,e)=>()=>{if(t.isInitialized)e();else{const n=()=>{setTimeout(()=>{t.off("initialized",n)},0),e()};t.on("initialized",n)}},v=(t,e,n)=>{t.loadNamespaces(e,z(t,n))},R=(t,e,n,o)=>{m(n)&&(n=[n]),n.forEach(i=>{t.options.ns.indexOf(i)<0&&t.options.ns.push(i)}),t.loadLanguages(e,z(t,o))},j=function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};const o=e.languages[0],i=e.options?e.options.fallbackLng:!1,s=e.languages[e.languages.length-1];if(o.toLowerCase()==="cimode")return!0;const c=(x,h)=>{const a=e.services.backendConnector.state[`${x}|${h}`];return a===-1||a===2};return n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&e.services.backendConnector.backend&&e.isLanguageChangingTo&&!c(e.isLanguageChangingTo,t)?!1:!!(e.hasResourceBundle(o,t)||!e.services.backendConnector.backend||e.options.resources&&!e.options.partialBundledLanguages||c(o,t)&&(!i||c(s,t)))},A=function(t,e){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return!e.languages||!e.languages.length?(C("i18n.languages were undefined or empty",e.languages),!0):e.options.ignoreJSONStructure!==void 0?e.hasLoadedNamespace(t,{lng:n.lng,precheck:(i,s)=>{if(n.bindI18n&&n.bindI18n.indexOf("languageChanging")>-1&&i.services.backendConnector.backend&&i.isLanguageChangingTo&&!s(i.isLanguageChangingTo,t))return!1}}):j(t,e,n)},m=t=>typeof t=="string",B=t=>typeof t=="object"&&t!==null,M=/&(?:amp|#38|lt|#60|gt|#62|apos|#39|quot|#34|nbsp|#160|copy|#169|reg|#174|hellip|#8230|#x2F|#47);/g,P={"&amp;":"&","&#38;":"&","&lt;":"<","&#60;":"<","&gt;":">","&#62;":">","&apos;":"'","&#39;":"'","&quot;":'"',"&#34;":'"',"&nbsp;":" ","&#160;":" ","&copy;":"©","&#169;":"©","&reg;":"®","&#174;":"®","&hellip;":"…","&#8230;":"…","&#x2F;":"/","&#47;":"/"},U=t=>P[t],q=t=>t.replace(M,U);let J={bindI18n:"languageChanged",bindI18nStore:"",transEmptyNodeValue:"",transSupportBasicHtmlNodes:!0,transWrapTextNodes:"",transKeepBasicHtmlNodesFor:["br","strong","i","p"],useSuspense:!0,unescape:q};const W=()=>J;let G;const K=()=>G,Y=g.createContext();class Q{constructor(){L(this,"getUsedNamespaces",()=>Object.keys(this.usedNamespaces));this.usedNamespaces={}}addUsedNamespaces(e){e.forEach(n=>{this.usedNamespaces[n]||(this.usedNamespaces[n]=!0)})}}const X=(t,e)=>{const n=g.useRef();return g.useEffect(()=>{n.current=t},[t,e]),n.current},F=(t,e,n,o)=>t.getFixedT(e,n,o),Z=(t,e,n,o)=>g.useCallback(F(t,e,n,o),[t,e,n,o]),_=function(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};const{i18n:n}=e,{i18n:o,defaultNS:i}=g.useContext(Y)||{},s=n||o||K();if(s&&!s.reportNamespaces&&(s.reportNamespaces=new Q),!s){C("You will need to pass in an i18next instance by using initReactI18next");const r=(l,d)=>m(d)?d:B(d)&&m(d.defaultValue)?d.defaultValue:Array.isArray(l)?l[l.length-1]:l,u=[r,{},!1];return u.t=r,u.i18n={},u.ready=!1,u}s.options.react&&s.options.react.wait!==void 0&&C("It seems you are still using the old wait option, you may migrate to the new useSuspense behaviour.");const c={...W(),...s.options.react,...e},{useSuspense:x,keyPrefix:h}=c;let a=i||s.options&&s.options.defaultNS;a=m(a)?[a]:a||["translation"],s.reportNamespaces.addUsedNamespaces&&s.reportNamespaces.addUsedNamespaces(a);const f=(s.isInitialized||s.initializedStoreOnce)&&a.every(r=>A(r,s,c)),O=Z(s,e.lng||null,c.nsMode==="fallback"?a:a[0],h),S=()=>O,y=()=>F(s,e.lng||null,c.nsMode==="fallback"?a:a[0],h),[I,N]=g.useState(S);let b=a.join();e.lng&&(b=`${e.lng}${b}`);const T=X(b),p=g.useRef(!0);g.useEffect(()=>{const{bindI18n:r,bindI18nStore:u}=c;p.current=!0,!f&&!x&&(e.lng?R(s,e.lng,a,()=>{p.current&&N(y)}):v(s,a,()=>{p.current&&N(y)})),f&&T&&T!==b&&p.current&&N(y);const l=()=>{p.current&&N(y)};return r&&s&&s.on(r,l),u&&s&&s.store.on(u,l),()=>{p.current=!1,r&&s&&r.split(" ").forEach(d=>s.off(d,l)),u&&s&&u.split(" ").forEach(d=>s.store.off(d,l))}},[s,b]),g.useEffect(()=>{p.current&&f&&N(S)},[s,h,f]);const w=[I,s,f];if(w.t=I,w.i18n=s,w.ready=f,f||!f&&!x)return w;throw new Promise(r=>{e.lng?R(s,e.lng,a,()=>r()):v(s,a,()=>r())})};export{_ as u};
